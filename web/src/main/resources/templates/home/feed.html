<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>SocialWorld</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" href="css/main.css"/>
    <!--FIREBASE-->
    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-app.js"></script>
    <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-analytics.js"></script>
    <script src="js/jquery.min.js"></script>
</head>
<body>
<!-- Header -->
<header class="navigationHeader">
    <div class="inner">
        <!-- TODO: Width to be relative -->
        <a href="index" class="logo"><img src="images/logo.png" alt="logo" height="100"></a>
        <nav id="nav">
            <a href="explore">Explore</a>
            <a href="friends">Friends list</a>
            <a href="my_profile">My Profile</a>
        </nav>
    </div>
</header>
<div class="row">
    <div class="leftcolumn">
        <div class="create-post">
            <form action="/createPost" method="post">
                <input type="hidden" id="uid" th:value="${user.id}">
                <input type="hidden" id="pictureUrl" name="pictureUrl">
                <input type="file" name="postPhoto" id="postPhoto" accept="image/*">
                <textarea rows="3" required name="postText" id="postText"
                          placeholder="What is on your mind ?"></textarea>
                <input type="submit" id="postButton" value="Post">
            </form>
        </div>
        <hr>
        <div th:each="post : ${posts}" th:id="${'post' + post.id}" class="card">
            <h3 th:text="${userService.getUserById(post.userId).name}"></h3>
            <h2 th:text="${post.text}"></h2>
            <h5 th:text="${post.date}"></h5>
            <img th:src="${post.picture}" style="height:200px;">
            <h6 th:text="${#lists.size(post.userLikes)}"></h6>
            <img src="images/tick.png" th:id="${post.id}" class="like" alt="like">
            <input type="text" th:id="${'c' + post.id}" name="comment">
            <input type="submit" th:id="${post.id}" class="submitComment" value="Comment">
            <div class="comments-list" th:each="comment : ${commentService.getCommentsByPost(post.id)}">
                <div class="comment">
                    <h5 th:text="${userService.getUserById(comment.userId).name}"></h5>
                    <h5 th:text="${comment.text}"></h5>
                </div>
            </div>
        </div>
    </div>
    <div class="rightcolumn">
        <div class="card">
            <h2 th:text="${user.name}"></h2>
            <img th:src="${user.picture}" style="height:100px;">
            <a href="/logout" id="logout">Logout</a>
        </div>
        <div class="card">
            <img src="images/logo.png" alt="logo" height="100">
            <img src="images/logo.png" alt="logo" height="100">
            <img src="images/logo.png" alt="logo" height="100">
        </div>
    </div>
</div>

<!-- Add Firebase products that you want to use -->
<script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-storage.js"></script>
<script src="js/firebaseInit.js"></script>
<script src="js/firebaseLogout.js"></script>
<script src="js/createPost.js"></script>
<script src="js/like.js"></script>
<script src="js/comment.js"></script>
</body>
</html>